#!/bin/bash

# Load resources
xrdb -merge ~/.Xresources

# Rotate background
while true; do
    ln -sfv "$(find -L "$HOME/Pictures/backgrounds" -type f | grep -E '[.](jpg|png)$' | sort -R | head -n1)" \
            "$HOME/Pictures/.current_background"
    xli -onroot -fillscreen -smooth -dispgamma 1.5 "$HOME/Pictures/.current_background"
    sleep 360s
done &

# Start udiskie to handle media
udiskie &

# Fire up apps
xfce4-power-manager &

xscreensaver -no-splash &

if [ -x /usr/bin/nm-applet ] ; then
   nm-applet --sm-disable &
fi

exec xmonad
